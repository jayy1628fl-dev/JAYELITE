<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JCT ELITE | Graphics</title>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #020617; --accent: #FFD700; --border: rgba(255, 255, 255, 0.1); }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--primary); color: #f8fafc; font-family: 'Space Grotesk', sans-serif; }
        
        /* Announcement Bar */
        #announcement-bar { background: var(--accent); color: #000; text-align: center; padding: 10px; font-weight: 800; font-size: 0.8rem; display: none; text-transform: uppercase; letter-spacing: 1px; }
        
        header { padding: 20px 0; background: rgba(2, 6, 23, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 1000; }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; }
        .nav { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: 'Syncopate'; font-size: 1rem; color: #fff; letter-spacing: 3px; }
        .logo span { color: var(--accent); }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; padding: 50px 0; }
        .card { background: rgba(255,255,255,0.02); padding: 30px; border: 1px solid var(--border); border-radius: 4px; }
        .price { font-size: 1.8rem; font-weight: 700; margin: 15px 0; color: var(--accent); }
        .btn-main { background: var(--accent); color: #000; padding: 15px; border: none; font-weight: 800; cursor: pointer; width: 100%; text-transform: uppercase; }
        .portfolio-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
        .port-img { width: 100%; height: 300px; object-fit: cover; border: 1px solid var(--border); }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; }
        .modal-card { background: #050a18; border: 1px solid var(--accent); padding: 40px; width: 90%; max-width: 400px; text-align: center; }
    </style>
</head>
<body>

    <div id="announcement-bar"></div>

    <header>
        <div class="container nav">
            <div class="logo">JCT // <span>ELITE</span></div>
            <div id="visit-count" style="font-size: 0.7rem; opacity: 0.5;">...</div>
        </div>
    </header>

    <div class="container">
        <h2 style="margin-top: 40px; font-family: 'Syncopate';">SERVICES</h2>
        <div class="grid" id="service-display"></div>

        <h2 style="margin-top: 40px; font-family: 'Syncopate';">PORTFOLIO</h2>
        <div class="portfolio-grid" id="portfolio-display"></div>
    </div>

    <div id="payModal" class="modal">
        <div class="modal-card">
            <h2 style="color:var(--accent)">TRANSFER</h2>
            <div style="margin: 20px 0; background: #000; padding: 20px; border: 1px dashed var(--accent);">
                <p>9156489166</p>
                <p>OPAY</p>
                <p style="color:var(--accent)">JAY CREATIVE TECH</p>
            </div>
            <button class="btn-main" id="confirmBtn">CONFIRM & MESSAGE</button>
            <p onclick="document.getElementById('payModal').style.display='none'" style="margin-top:10px; cursor:pointer; opacity:0.5">Close</p>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue, set, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC-3znjf5oxH2irY8zxt0c5JrjWVn7Rkf0",
            databaseURL: "https://jayct-b6e54-default-rtdb.firebaseio.com/",
            projectId: "jayct-b6e54",
            appId: "1:570915018020:web:bcc362b9cea1359ba94fb1"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // 1. TRACK VISIT
        set(ref(db, 'stats/visits'), increment(1));

        onValue(ref(db, 'siteData'), (snap) => {
            const data = snap.val() || {};
            
            // 2. ANNOUNCEMENT BAR
            const bar = document.getElementById('announcement-bar');
            if(data.announcement) {
                bar.innerText = data.announcement;
                bar.style.display = 'block';
            } else { bar.style.display = 'none'; }

            // 3. RENDER CONTENT
            document.getElementById('service-display').innerHTML = (data.services || []).map(s => `
                <div class="card">
                    <h3>${s.name}</h3>
                    <div class="price">â‚¦${s.price}</div>
                    <button class="btn-main" onclick="openPay('${s.name}')">Get Started</button>
                </div>`).join('');

            document.getElementById('portfolio-display').innerHTML = (data.portfolio || []).map(img => `
                <img src="${img}" class="port-img">`).join('');
        });

        onValue(ref(db, 'stats/visits'), (snap) => {
            document.getElementById('visit-count').innerText = snap.val() + " VISITS";
        });

        window.openPay = function(service) {
            document.getElementById('payModal').style.display = 'flex';
            document.getElementById('confirmBtn').onclick = () => {
                // 4. LOG ORDER
                const orderId = Date.now();
                set(ref(db, 'orders/' + orderId), {
                    service: service,
                    time: new Date().toLocaleString(),
                    status: 'Pending'
                });
                set(ref(db, 'stats/clicks'), increment(1));
                window.open(`https://wa.link/6x8ws0?text=I paid for ${service}. ID: ${orderId}`);
            };
        };
    </script>
</body>
</html>
